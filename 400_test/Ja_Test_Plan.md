# テスト計画書
# Tributary - Solana報酬配布システム

**更新日**: 2025-09-18
**更新者**: akameGusya

## 概要
本文書は、Tributaryシステムの包括的なテスト計画と実行手順を定義します。品質保証と本番環境での安全な運用を確保するためのテスト項目とパラメータを明示します。

## テスト戦略

### テストフェーズ
1. **単体テスト** - 個別コンポーネントの機能検証
2. **統合テスト** - コンポーネント間連携の検証
3. **システムテスト** - エンドツーエンドシナリオの検証
4. **受入テスト** - ユーザー要件の最終確認

### テスト環境
- **devnet**: 基本機能開発テスト
- **testnet**: 統合・システムテスト（本番前最終確認）
- **mainnet**: テスト対象外（実運用のみ）

## テスト項目一覧

### 1. CLI基本機能テスト

#### 1.1 プロジェクト初期化テスト
| 項目ID | テスト項目 | 優先度 | 実行環境 |
|-------|----------|-------|----------|
| T001 | 基本的な初期化コマンド | 高 | devnet |
| T002 | インタラクティブモード初期化 | 高 | devnet |
| T003 | 既存設定上書き（--force） | 中 | devnet |
| T004 | 無効なパラメータエラーハンドリング | 高 | devnet |
| T005 | ネットワーク別初期化 | 高 | devnet/testnet |

#### 1.2 ウォレット収集テスト
| 項目ID | テスト項目 | 優先度 | 実行環境 |
|-------|----------|-------|----------|
| T010 | SOLトークン保有者収集 | 高 | testnet |
| T011 | 閾値指定フィルタリング | 高 | testnet |
| T012 | 大口保有者除外機能 | 中 | testnet |
| T013 | キャッシュ機能動作確認 | 中 | testnet |
| T014 | 出力ファイル形式（JSON/CSV） | 中 | testnet |
| T015 | 大量データ処理（1000+件） | 低 | testnet |

#### 1.3 配布シミュレーションテスト
| 項目ID | テスト項目 | 優先度 | 実行環境 |
|-------|----------|-------|----------|
| T020 | 基本配布シミュレーション | 高 | testnet |
| T021 | 詳細結果表示 | 中 | testnet |
| T022 | 異なるトークンでのシミュレーション | 高 | testnet |
| T023 | 比例計算の正確性検証 | 高 | testnet |
| T024 | ガス費用見積もり精度 | 中 | testnet |

#### 1.4 配布実行テスト
| 項目ID | テスト項目 | 優先度 | 実行環境 |
|-------|----------|-------|----------|
| T030 | ドライラン実行 | 高 | testnet |
| T031 | 少額実配布（10名以下） | 高 | testnet |
| T032 | 中規模配布（50名程度） | 中 | testnet |
| T033 | バッチサイズ変更テスト | 中 | testnet |
| T034 | エラー時の部分実行状態確認 | 高 | testnet |
| T035 | トランザクション履歴記録 | 高 | testnet |

### 2. 設定管理テスト

#### 2.1 設定ファイル操作テスト
| 項目ID | テスト項目 | 優先度 | 実行環境 |
|-------|----------|-------|----------|
| T040 | 設定表示（show） | 高 | devnet |
| T041 | 設定検証（validate） | 高 | devnet |
| T042 | 設定エクスポート | 中 | devnet |
| T043 | 不正な設定値検出 | 高 | devnet |
| T044 | 機密情報の適切なマスキング | 高 | devnet |

### 3. エラーハンドリングテスト

#### 3.1 ネットワークエラーテスト
| 項目ID | テスト項目 | 優先度 | 実行環境 |
|-------|----------|-------|----------|
| T050 | RPC接続エラー処理 | 高 | devnet |
| T051 | タイムアウト処理 | 中 | devnet |
| T052 | リトライ機能動作確認 | 中 | devnet |

#### 3.2 ユーザーエラーテスト
| 項目ID | テスト項目 | 優先度 | 実行環境 |
|-------|----------|-------|----------|
| T060 | 無効なトークンアドレス | 高 | devnet |
| T061 | 残高不足エラー | 高 | testnet |
| T062 | 権限不足エラー | 高 | testnet |
| T063 | 設定ファイル不在エラー | 高 | devnet |

### 4. パフォーマンステスト

#### 4.1 処理性能テスト
| 項目ID | テスト項目 | 優先度 | 実行環境 |
|-------|----------|-------|----------|
| T070 | 1000件ウォレット収集時間 | 中 | testnet |
| T071 | 100件配布処理時間 | 中 | testnet |
| T072 | メモリ使用量監視 | 低 | testnet |

### 5. セキュリティテスト

#### 5.1 秘密鍵管理テスト
| 項目ID | テスト項目 | 優先度 | 実行環境 |
|-------|----------|-------|----------|
| T080 | 秘密鍵ファイル読み込み | 高 | devnet |
| T081 | 無効な秘密鍵エラー処理 | 高 | devnet |
| T082 | 秘密鍵ファイル権限確認 | 中 | devnet |

### 6. 本番準備テスト

#### 6.1 本番設定検証テスト
| 項目ID | テスト項目 | 優先度 | 実行環境 |
|-------|----------|-------|----------|
| T090 | mainnet設定ファイル検証 | 高 | devnet |
| T091 | 本番用設定値検証 | 高 | devnet |
| T092 | mainnet警告メッセージ確認 | 中 | devnet |

## テスト実行順序

### フェーズ1: 基本機能確認（devnet）
1. プロジェクト初期化テスト（T001-T005）
2. 設定管理テスト（T040-T044）
3. エラーハンドリング基本テスト（T050-T063）

### フェーズ2: 統合テスト（testnet）
1. ウォレット収集テスト（T010-T015）
2. 配布シミュレーションテスト（T020-T024）
3. 配布実行テスト（T030-T035）

### フェーズ3: パフォーマンステスト（testnet）
1. 処理性能テスト（T070-T072）
2. セキュリティテスト（T080-T082）

### フェーズ4: 本番準備テスト（devnet）
1. 本番設定検証テスト（T090-T092）

## 合格基準

### 必須合格項目
- [ ] 優先度「高」の全項目が合格
- [ ] セキュリティテスト全項目が合格
- [ ] 本番準備テスト全項目が合格

### 品質基準
- [ ] コマンド実行成功率: 95%以上
- [ ] エラーメッセージの適切性: 100%
- [ ] パフォーマンス要件充足: 100%

## テスト環境要件

### 必要なリソース
- **テスト用SOL**: devnetで約5 SOL、testnetで約10 SOL
- **テスト用トークン**: devnet・testnetで適量
- **テスト用ウォレット**: 管理者用+受信者用複数

### 必要なツール
- Node.js 18.0+
- 最新版tributary CLI
- テスト用秘密鍵ファイル

## リスク管理

### 高リスク項目
- testnetでの実トークン配布処理
- 大量データ処理時のメモリ不足
- ネットワーク障害時の処理継続

### 対策
- testnetテストは少額で実施
- メモリ監視とアラート設定
- 障害シナリオでの手動介入手順整備